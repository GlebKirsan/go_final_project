# Трекер задач

Программа с веб-интерфейсом для отслеживания задач. 
Можно:
- завести задачу, добавить ей описание и поставить период повторения;
- отметить задачу выполненной;
- удалить задачу;
- отредактировать задачу;
- искать по названию или дате.

## Запуск сервера
```bash
# запускать в корне
go run ./...
```
Либо с помощью утилиты `make`:
```bash
make run
```
По умолчанию сервер запускается на порту 7540.
Полный адрес `http://localhost:7540`.
Пароль для авторизации — `dummy`. (меняется через переменную окружения `TODO_PASSWORD`, секрет для шифровки jwt можно переопределить через переменную окружения `TODO_TOKEN_SECRET`)

Чтобы изменить порт на другой, потребуется определить переменную окружения `TODO_PORT`.

При запуске сервера, если файл с базой данных не будет найден, то программа сама создаст БД и таблицу с индексом.
### Сборка и запуск приложения в docker
```bash
# запускать в корне
docker build -t {имя образа} .
```
Или с помощью `make` (будет создан образ с названием `todo-app`):
```bash
make docker
```
Затем запустить (пароль для странички login — `simple_password`):
```bash
docker run -d -p 7540:7540 todo-app
```
и открыть `http://localhost:7540`.

Или более длинную версию, в которой можно указать:
- `TODO_PORT`, который сервис будет прослушивать внутри контейнера и который нужно связать с портом на локальной машине, чтобы открыть страницы сервиса;
- `TODO_PASSWORD`, который сервис запросит при попытке открыть страницу сервиса;
- `TODO_DBFILE` — путь, по которому внутри контейнера будет заведена база данных, если захочется подключить её через ключ `-v` (по умолчанию находится в корне `/scheduler.db`)
```bash
docker run -d -p LOCAL_PORT:PORT \
    -e TODO_DBFILE=/path/to/dbfile \
    -e TODO_PASSWORD=yourpassword \
    -e TODO_PORT=PORT \
    todo-app
```

## Запуск тестов
```bash
# предварительно необходимо запустить сервер
go run ./...
go test ./tests
```
После прогона тестов БД будет заполнена тестовыми данными.

## Использованы библиотеки
- `migrate` для миграции БД;
- `zerolog` для логирования;
- `chi` фреймворк для разработки api;
- `envconfig` для наполнения конфига из переменных окружения;
- `render` для удобного создания JSON ответов;
- `sqlite` для взаимодействия с sqlite3;
- `jwt` для работы с токеном.

## Выполненные задачи со звёздочкой
- [x] Задание порта через `TODO_PORT`;
- [x] Задание пути до файла с базой данных через `TODO_DBFILE`;
- [x] Периоды с неделями и месяцами для задач;
- [x] Поиск по названию задачи или по дате;
- [x] Авторизация;
- [x] Создание докер образа.